<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Penalty Duel</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body{
  margin:0;
  background:#0f1115;
  color:#fff;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
}
.app{padding:16px; text-align:center;}
h1{font-size:20px;margin-bottom:6px}
.muted{color:#9aa3b2;font-size:13px}

.stage{
  position:relative;
  max-width:420px;
  height:260px;
  margin:20px auto;
  background:#0b0d12;
  border-radius:18px;
  border:1px solid #252a36;
  overflow:hidden;
}
.goal{
  position:absolute;
  top:30px; left:30px; right:30px;
  height:120px;
  border:2px solid rgba(255,255,255,.3);
  border-radius:14px;
}
.goal:before{
  content:"";
  position:absolute; inset:0;
  background:
    linear-gradient(rgba(255,255,255,.12) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,.12) 1px, transparent 1px);
  background-size:24px 24px;
  opacity:.5;
}
.keeper{
  position:absolute;
  top:80px;
  left:50%;
  width:50px;height:50px;
  transform:translateX(-50%);
  border-radius:16px;
  background:rgba(255,255,255,.18);
}
.ball{
  position:absolute;
  bottom:18px;
  left:50%;
  width:22px;height:22px;
  transform:translateX(-50%);
  border-radius:50%;
  background:radial-gradient(circle at 30% 30%,#fff,#cfd6e6);
  box-shadow:0 10px 20px rgba(0,0,0,.4);
  transition:transform .1s ease;
}
.line{
  position:absolute;
  width:2px;
  background:rgba(140,255,193,.8);
  transform-origin:bottom center;
  bottom:29px;
  left:50%;
  display:none;
}
.flash{
  position:absolute; inset:0;
  opacity:0;
  transition:opacity .15s ease;
}
.score{
  margin-top:10px;
  font-weight:700;
}
.tip{margin-top:10px;font-size:13px;color:#9aa3b2}
</style>
</head>

<body>
<div class="app">
  <h1>‚öΩ Penalty Duel</h1>
  <div class="muted">–°–≤–∞–π–ø–Ω–∏ –ø–æ –º—è—á—É –∏ –¥–µ—Ä–∂–∏ ‚Äî –æ—Ç–ø—É—Å—Ç–∏, —á—Ç–æ–±—ã —É–¥–∞—Ä–∏—Ç—å</div>

  <div class="stage" id="stage">
    <div class="goal"></div>
    <div class="keeper" id="keeper"></div>
    <div class="line" id="aimLine"></div>
    <div class="ball" id="ball"></div>
    <div class="flash" id="flash"></div>
  </div>

  <div class="score" id="score">–£–¥–∞—Ä 1 / 5 ¬∑ –ì–æ–ª—ã: 0</div>
  <div class="tip" id="tip">–ö–æ—Å–Ω–∏—Å—å –º—è—á–∞</div>
</div>

<script>
const tg = window.Telegram?.WebApp;
try{tg?.ready();tg?.expand();}catch(e){}

const ball = document.getElementById("ball");
const keeper = document.getElementById("keeper");
const line = document.getElementById("aimLine");
const flash = document.getElementById("flash");
const scoreEl = document.getElementById("score");
const tip = document.getElementById("tip");

let startX=0,startY=0,startT=0;
let holding=false;
let power=0;
let shot=1,goals=0;

function h(type){ try{tg?.HapticFeedback?.impactOccurred(type);}catch(e){} }

function resetBall(){
  ball.style.transform="translateX(-50%) scale(1)";
  line.style.display="none";
  keeper.style.transform="translateX(-50%)";
}

ball.addEventListener("touchstart",e=>{
  const t=e.touches[0];
  startX=t.clientX;
  startY=t.clientY;
  startT=Date.now();
  holding=true;
  power=0;
  line.style.display="block";
  h("light");
  tip.textContent="–î–µ—Ä–∂–∏ –ø–∞–ª–µ—Ü ‚Äî –æ—Ç–ø—É—Å—Ç–∏ –¥–ª—è —É–¥–∞—Ä–∞";
});

ball.addEventListener("touchmove",e=>{
  if(!holding) return;
  const t=e.touches[0];
  const dx=t.clientX-startX;
  const dy=startY-t.clientY;
  const angle=Math.atan2(dx,dy);
  const len=Math.min(120,Math.sqrt(dx*dx+dy*dy));
  line.style.height=len+"px";
  line.style.transform=`translateX(-50%) rotate(${angle}rad)`;
  power=Math.min(1,len/100);
  ball.style.transform=`translateX(-50%) scale(${1+power*0.25})`;
});

ball.addEventListener("touchend",()=>{
  if(!holding) return;
  holding=false;
  line.style.display="none";
  h("medium");

  const angleDeg=parseFloat(line.style.transform.match(/rotate\((.*)rad/)[1])||0;
  let dir="C";
  if(angleDeg<-0.25) dir="L";
  if(angleDeg>0.25) dir="R";

  const keeperDir=Math.random()<0.4?"C":(Math.random()<0.5?"L":"R");
  keeper.style.transform =
    keeperDir==="L"?"translateX(-140%)":
    keeperDir==="R"?"translateX(40%)":
    "translateX(-50%)";

  let miss = power>0.9 && Math.random()<0.3;
  let save = !miss && dir===keeperDir && Math.random()<(0.6-power*0.4);

  setTimeout(()=>{
    if(miss){
      flash.style.background="rgba(255,92,92,.2)";
      flash.style.opacity=1;
      tip.textContent="‚ùå –ú–∏–º–æ";
      h("error");
    }else if(save){
      flash.style.background="rgba(255,92,92,.2)";
      flash.style.opacity=1;
      tip.textContent="üß§ –°–µ–π–≤";
      h("error");
    }else{
      goals++;
      flash.style.background="rgba(140,255,193,.2)";
      flash.style.opacity=1;
      tip.textContent="‚öΩÔ∏è –ì–æ–ª!";
      h("success");
    }
    setTimeout(()=>flash.style.opacity=0,150);

    shot++;
    scoreEl.textContent=`–£–¥–∞—Ä ${Math.min(shot,5)} / 5 ¬∑ –ì–æ–ª—ã: ${goals}`;
    resetBall();

    if(shot>5){
      tip.textContent = goals>=3 ? "üèÜ –ü–æ–±–µ–¥–∞ —Å–µ—Ä–∏–∏!" : "–°–µ—Ä–∏—è –æ–∫–æ–Ω—á–µ–Ω–∞";
    }
  },200);
});
</script>
</body>
</html>




