<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>F1 Reaction Duel</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body {
    font-family: system-ui, sans-serif;
    background: #0f1115;
    color: white;
    text-align: center;
    padding-top: 40px;
}
#light {
    width: 120px;
    height: 120px;
    margin: 40px auto;
    border-radius: 50%;
    background: red;
    box-shadow: 0 0 20px red;
}
button {
    font-size: 18px;
    padding: 12px 20px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
}
#result {
    margin-top: 30px;
    font-size: 22px;
}
</style>
</head>

<body>

<h1>üèÅ F1 Reaction Duel</h1>
<div id="player"></div>

<div id="light"></div>

<button id="startBtn">–ñ–¥–∞—Ç—å —Å—Ç–∞—Ä—Ç</button>

<div id="result"></div>

<script>
const tg = window.Telegram.WebApp;
tg.ready();

const playerDiv = document.getElementById("player");
const light = document.getElementById("light");
const button = document.getElementById("startBtn");
const result = document.getElementById("result");

const user = tg.initDataUnsafe?.user;

if (user) {
    playerDiv.innerText = `–ò–≥—Ä–æ–∫: ${user.username || user.first_name}`;
}

let startTime = 0;
let waiting = false;
let timer;

button.onclick = () => {
    if (waiting) return;

    result.innerText = "";
    light.style.background = "red";
    light.style.boxShadow = "0 0 20px red";

    waiting = true;
    button.innerText = "–ñ–î–ò...";

    const delay = 2000 + Math.random() * 3000;

    timer = setTimeout(() => {
        light.style.background = "lime";
        light.style.boxShadow = "0 0 30px lime";
        startTime = Date.now();
    }, delay);
};

light.onclick = () => {
    if (!waiting) return;

    if (!startTime) {
        clearTimeout(timer);
        result.innerText = "‚ùå –§–∞–ª—å—Å—Ç–∞—Ä—Ç!";
        reset();
        return;
    }

    const reaction = Date.now() - startTime;
    result.innerText = `‚ö° –†–µ–∞–∫—Ü–∏—è: ${reaction} –º—Å`;
    reset();
};

function reset() {
    waiting = false;
    startTime = 0;
    button.innerText = "–ï—â—ë —Ä–∞–∑";
}
</script>

</body>
</html>
